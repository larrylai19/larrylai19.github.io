<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Larry's notes</title><meta name="keywords" content="C++"><meta name="author" content="Larry Lai"><meta name="copyright" content="Larry Lai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Larry&#39;s notes">
<meta property="og:url" content="http://www.larrysprognotes.com/page/2/index.html">
<meta property="og:site_name" content="Larry&#39;s notes">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="http://www.larrysprognotes.com/avatar.jpg">
<meta property="article:author" content="Larry Lai">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.larrysprognotes.com/avatar.jpg"><link rel="shortcut icon" href="/img/L-favicon-32x32.ico"><link rel="canonical" href="http://www.larrysprognotes.com/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-38280830-2"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-38280830-2');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查詢的內容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"你已切換為繁體","cht_to_chs":"你已切換為簡體","day_to_night":"你已切換為深色模式","night_to_day":"你已切換為淺色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-07-13 22:27:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">324</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">86</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分類</div><div class="length-num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Larry's notes</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜尋</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/LeetCode-51/" title="LeetCode - 51 解題紀錄">LeetCode - 51 解題紀錄</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-11-22T06:04:27.000Z" title="發表於 2022-11-22 14:04:27">2022-11-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/LeetCode/">LeetCode</a></span></div><div class="content">題目： LeetCode - 51. N-Queens...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/YOLOv7_4/" title="YOLOv7 on Windows (四) 引用模型與自瞄實現代碼">YOLOv7 on Windows (四) 引用模型與自瞄實現代碼</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-10-30T07:04:27.000Z" title="發表於 2022-10-30 15:04:27">2022-10-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/YOLOv7/">YOLOv7</a></span></div><div class="content">要將訓練好的模型實現自瞄我分為以下步驟

引入模型
擷取螢幕截圖
預測物體位置並取得中心座標
取得鼠標移動 offset
微調 offset
移動鼠標並射擊

以下將以 Aimlab Gridshot 為例實作
前置準備想要引入模型須先準備一些依賴

hubconf.py  引入模型的依賴文件，可於這裡下載，似乎也可直接在線調用

models、utils  直接複製 YOLOv7 目錄中的 models、utils 兩個資料夾即可

訓練好的模型


所有檔案放入同一目錄

best.pt 為訓練好的模型，以下將解釋實現步驟
import 與設定參數根據自己的配置設定參數，延遲根據電腦配置設定，可實際執行不斷調整至合適的延遲
123456789101112131415161718192021import sysimport timeimport torchimport win32apiimport win32confrom PyQt5.QtWidgets import QApplication# data settingGAME_WIDTH = 1920GAME_HEIGHT = 1 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/PyInstaller/" title="PyInstaller -D 檔案雜亂">PyInstaller -D 檔案雜亂</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-10-22T07:04:27.000Z" title="發表於 2022-10-22 15:04:27">2022-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span></div><div class="content">在專案完成後為了方便部屬有時會有將專案打包的需求，以 Python 來說目前常用的工具為 PyInstaller。
PyInstaller 主要會有兩個問題，一是它會將該環境所有套件打包，造成體積龐大，這點可透過創建新的虛擬環境解決。
另一點，為了簡潔，一般會帶參數 -F 使其打包後僅為一個執行檔，但由於它會將所有套件打包在一起，造成該執行檔體積龐大，執行緩慢，所以有時會改用 -D 這個參數使其打包後為一個目錄，又由於它會將所有套件打包在一起，所以檔案看起來會很雜亂。
以目前的小專案為例，打包成一個執行檔後會長這樣

不到千行的專案卻有 60MB
若打包為一個目錄的話會長這樣

執行檔本身雖然縮小為 5MB，但整個目錄略顯雜亂，要透過設定檔調整程式時也不易直接看出。
解決方法從 Shell Script 得到靈感，在原本的目錄加一層上級目錄，用 bat 執行原本打包好的程式，使其執行時加入變數的目錄為上級目錄，如此便可將設定檔與一些產出檔案和原程式區隔開，最後將 bat 轉為 exe 檔案即可。
最終看起來會像這樣，app 內放的為打包成目錄的程式

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/PUPC2022/" title="PUPC 2022 心得">PUPC 2022 心得</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-07-31T10:04:27.000Z" title="發表於 2022-07-31 18:04:27">2022-07-31</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Others/">Others</a></span></div><div class="content">PUPC 全名是全國私立大專校院程式競賽，英文名常常換來換去比賽三人一組，每組一台電腦，入場可攜帶十張 A4 紙，可提前在單面作筆記
一組只有一台電腦，所以分工勢必為一人打 Code，另外兩人看題目，因為我英文能力極差，看題目效率很低，因此我們這組由我負責打 Code，但我前一天失眠，教室又很熱，整個人昏昏沉沉的，我也不知道我在寫什麼，想到什麼寫什麼
比賽過程和 CPE 差不多，難度我覺得比 CPE 簡單一些，可能是有隊友協助看題目，考 CPE 都得看 IO 猜題意，這次隊友把題目看得很仔細，寫起來感覺簡單不少，但有些題目還得用猜的，猜對了超開心
如果想增加一些個人經歷的話還蠻推薦參加這個比賽的，難度不會太高，我們沒有特別準備，拿到不錯的成績，若是有準備甚至有特別練習解題的人參加應該可以取得很厲害的成績
這次的台中之旅很愉快，前一天吃燒肉，一起聊天耍廢到凌晨，但我們住的旅館熱到睡不著，我們前一天只睡了兩小時左右，進了主辦學校也超熱，比賽時又熱又累不知道自己在幹嘛，結束比賽後也十分狼狽，突然下暴雨，我們都沒帶傘，又得淋雨坐車，整個人都快沒了
整體來說，很慶幸當時沒有嫌麻煩不參加，和朋友一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/YOLOv7_3/" title="YOLOv7 on Windows (三) AI 自瞄實現原理與危害">YOLOv7 on Windows (三) AI 自瞄實現原理與危害</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-07-25T10:04:27.000Z" title="發表於 2022-07-25 18:04:27">2022-07-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/YOLOv7/">YOLOv7</a></span></div><div class="content">隨著硬體計算能力和演算法的進步，AI 自瞄漸漸浮現出來，我第一次聽到這個詞是在去年，正好前幾天看到 YOLOv7 推出的消息，就很好奇像我這種沒有自己訓練過模型，對於深度學習也沒什麼概念的人，多久時間能做出來。雖然製作過程中踩了不少坑，成果還是很令我滿意的。
外掛原理在繼續今天的主題前，先解釋一下大部分遊戲外掛運作的原理
程式在執行時都會被載入到記憶體中，遊戲也不例外，當遊戲執行時，遊戲中出現的各種數據都以二進制的方式儲存在記憶體中，包含程式碼也是因此，讀取記憶體並修改內容是大部分遊戲外掛的原理，通常會有幾個 base address，將其值加上不同的偏移量便可得到各種數據，當然，程式每次被載入時在記憶體中的位置是不固定的，但目前都是採用虛擬記憶體的技術，使得 base address 是固定的，如果遊戲沒有更新的話，基本上找到的 base address 都不會變
手法上來說，一般會挑選一些較固定可控的數據，透過其 address 往上找 base address，大部分 address 都是 base address 的值經過好幾次偏移得到的，這非常考驗能力和經驗，對於組合語言也要 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/YOLOv7_2/" title="YOLOv7 on Windows (二) 訓練自己的資料集">YOLOv7 on Windows (二) 訓練自己的資料集</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-07-24T10:04:27.000Z" title="發表於 2022-07-24 18:04:27">2022-07-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/YOLOv7/">YOLOv7</a></span></div><div class="content">準備資料集將標註好的資料集放在一個資料夾內並取名為 all，資料集需為 YOLO 的格式，YOLO 格式為一張圖片搭配一個 txt 檔，如果是用 labelImg 標註應該還會有一個 classes.txt 的檔案，裡面放的就是你標註的 class 名稱，我準備了 60 張圖片，只有一個 class，整個看起來會像這樣

在 yolov7 的資料夾內建立一個資料夾取名為 mydataset，並將資料集放到裡面，由於將資料分割的步驟比較繁雜，我寫了一隻程式來分割，下載這隻程式並放到 mydataset 的資料夾內做完這一步看起來會像這樣

需要注意的是資料夾的名稱必須為 all，並且裡面要有 classes.txt，若沒有請自行新增，並打上自己標註的 class 名稱之後直接執行並帶入要作為 validation set 的圖片數量，程式會隨機取出
以我來說我想要 10 張圖片作為 validation set
python splitFile.py 10
執行完後會像這樣

到這裡就完成資料集的準備了 (我這邊沒有準備 test set，如果想要的話按照格式新增即可)
建立配置檔我們已 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/YOLOv7_1/" title="YOLOv7 on Windows (一) 建立環境與執行">YOLOv7 on Windows (一) 建立環境與執行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-07-23T10:04:27.000Z" title="發表於 2022-07-23 18:04:27">2022-07-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/YOLOv7/">YOLOv7</a></span></div><div class="content">建立環境先用 Anaconda 建立一個乾淨的新環境
conda create --name torch python=3.9
名稱及版本都可以更改，我這邊是用 3.9

接著進入環境安裝 GPU 版本的 PyTorch，也可以用 CPU 版本的，但速度慢非常多
安裝前先檢查 GPU 的驅動版本，可以在終端中使用 nvidia-smi 指令來查看驅動版本

之後到這個網站查看符合的 CUDA 版本YOLOv7 支持的 PyTorch 版本為 1.7.0 ~ 1.11.0 所以到這個網站挑選適合的安裝我安裝的是 1.11.0 + CUDA 11.3

安裝 1.12.0 也可以執行，但是在引入模型時會有問題PyTorch 比較大，需要一點時間下載安裝完後在終端直接執行 Python 檢查有沒有安裝成功

有看到自己的 GPU 就是成功了

安裝完後就可以 clone YOLOv7git clone https://github.com/WongKinYiu/yolov7.gitclone 完後進入資料夾，因為我們已經裝好 PyTorch 了，所以修改一下 requirements.txt ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/Sofrware-Architecture/" title="還沒想好標題">還沒想好標題</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-07-10T16:04:27.000Z" title="發表於 2022-07-11 00:04:27">2022-07-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Design-Pattern/">Design Pattern</a></span></div><div class="content">軟體架構通常要開發具有一定規模或比較複雜的軟體時，都會先根據需求或規格設計架構。以個人的角度而言，可以讓自己在開發時有更明確的方向，選擇框架時能考慮更全面，也會降低排除 BUG 的困難。以團隊的角度而言，好的架構設計可把軟體拆分成數個可獨立運作的部分，在開發上提升效率。常見的例子是有前後端的軟體，在設計架構時可先決定資料交互的形式、API 接口等等…，接著同步開發，最後花費一些時間整合即可。
設計好架構後記錄的方式有很多，架構圖加上文字說明是最詳盡，只有架構圖也可以接受，若不記錄可能會產生一些問題。
個人經驗我自己是不喜歡記錄的，一來麻煩，再者，思考單位如果是實體，思考速度會大幅下降，同時也限縮了很多可能性，就像是黏土一樣，黏土硬掉後要重新塑型比較困難，雖然可以用新的土把原本的蓋掉，但體積也會變大。
話雖如此，我最近卻深刻體會到沒有記錄帶來的後果。現在手上有一個開發週期挺長的專案，初期程式碼規模還比較小的時候沒有體會到這個問題，但到後面規模相對大的時候，突然意識到嚴重性，這個專案的需求都非常細微，因此一開始接手時無法完整的釐清所有需求及規格，都是邊開發邊修改，而我開發的時間又很間斷，一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/Cohesion&amp;Coupling/" title="內聚性與耦合性">內聚性與耦合性</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-05-23T17:04:27.000Z" title="發表於 2022-05-24 01:04:27">2022-05-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Design-Pattern/">Design Pattern</a></span></div><div class="content">在做軟體開發時，常常會聽到內聚性 (Cohesion) 及耦合性 (Coupling)，這兩個詞，這也是在設計軟體架構常常要考慮到的事情，該如何在這兩個特性中各自取得平衡，是非常重要的一件事。
內聚性內聚性簡單來說，就是在程式中，功能類似的東西或是相同用途的資料等等…，是否有放在相近的地方，和 OOP 中封裝的概念相似，一般會使用高內聚性、低內聚性來表示。比方說，將一些功能類似的函式打包成一個 class，就是一種高內聚性的表現。
通常會希望程式能夠有高內聚性，因為高內聚性和許多理想的軟體特性有關，包括 Robustness、Reliability、Reusability、Understandability 等等。
耦合性耦合性簡單來說，就是兩個東西之間的相依性，比如兩個 class、兩個 function 等等，兩者的關係越大，耦合性就越高，一般來說，會希望兩個東西越獨立越好，因為若兩者耦合性越高，則改變其中一個對另一個造成的影響可能就越大，所以一般來說會希望在保有相同的特性下，耦合性越低越好。
平衡與取捨通常會希望整體保持高內聚、低耦合，但有時為了程式簡潔，或是設計方便，適時地降低 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/veryhurry/" title="十萬火急">十萬火急</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">發表於</span><time datetime="2022-04-12T15:04:27.000Z" title="發表於 2022-04-12 23:04:27">2022-04-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/daily/">daily</a></span></div><div class="content"> </div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/3/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Larry Lai</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">324</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">86</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分類</div><div class="length-num">15</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/larrylai19"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新評論</span></div><div class="aside-list"><span>正在載入中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分類</span>
            <a class="card-more-btn" href="/categories/" title="檢視更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/1091DataStructures-YzuCse/"><span class="card-category-list-name">1091DataStructures-YzuCse</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/1091LinearAlgebra-YzuCse/"><span class="card-category-list-name">1091LinearAlgebra-YzuCse</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/1092IntroductionToAlgorithms-YzuCse/"><span class="card-category-list-name">1092IntroductionToAlgorithms-YzuCse</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Bitwise/"><span class="card-category-list-name">Bitwise</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Data-Mining/"><span class="card-category-list-name">Data Mining</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Design-Pattern/"><span class="card-category-list-name">Design Pattern</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>標籤</span></div><div class="card-tag-cloud"><a href="/tags/0-1-Knapsack/" style="font-size: 1.17em; color: #999ca0">0-1 Knapsack</a> <a href="/tags/AI/" style="font-size: 1.21em; color: #999da3">AI</a> <a href="/tags/Anaconda/" style="font-size: 1.21em; color: #999da3">Anaconda</a> <a href="/tags/Articulation-Points/" style="font-size: 1.1em; color: #999">Articulation Points</a> <a href="/tags/BFS/" style="font-size: 1.17em; color: #999ca0">BFS</a> <a href="/tags/Back-Tracking/" style="font-size: 1.1em; color: #999">Back Tracking</a> <a href="/tags/Bellman-Ford/" style="font-size: 1.17em; color: #999ca0">Bellman Ford</a> <a href="/tags/Bitwise/" style="font-size: 1.25em; color: #999fa7">Bitwise</a> <a href="/tags/Butterfly/" style="font-size: 1.1em; color: #999">Butterfly</a> <a href="/tags/C/" style="font-size: 1.5em; color: #99a9bf">C++</a> <a href="/tags/CPE-2020-06-09/" style="font-size: 1.14em; color: #999a9c">CPE - 2020/06/09</a> <a href="/tags/CPE-2020-10-20/" style="font-size: 1.28em; color: #99a0aa">CPE - 2020/10/20</a> <a href="/tags/CPE-2020-12-22/" style="font-size: 1.28em; color: #99a0aa">CPE - 2020/12/22</a> <a href="/tags/Coin-Change/" style="font-size: 1.17em; color: #999ca0">Coin Change</a> <a href="/tags/Computational-Geometry/" style="font-size: 1.17em; color: #999ca0">Computational Geometry</a> <a href="/tags/Convex-Hull/" style="font-size: 1.17em; color: #999ca0">Convex Hull</a> <a href="/tags/DFS/" style="font-size: 1.14em; color: #999a9c">DFS</a> <a href="/tags/Data-Mining/" style="font-size: 1.1em; color: #999">Data Mining</a> <a href="/tags/Deep-Learning/" style="font-size: 1.21em; color: #999da3">Deep Learning</a> <a href="/tags/Design-Pattern/" style="font-size: 1.14em; color: #999a9c">Design Pattern</a> <a href="/tags/Dijkstra/" style="font-size: 1.17em; color: #999ca0">Dijkstra</a> <a href="/tags/Dinic/" style="font-size: 1.28em; color: #99a0aa">Dinic</a> <a href="/tags/Divide-and-Conquer/" style="font-size: 1.14em; color: #999a9c">Divide and Conquer</a> <a href="/tags/Dynamic-Programming/" style="font-size: 1.39em; color: #99a5b5">Dynamic Programming</a> <a href="/tags/Edmonds-Karp/" style="font-size: 1.25em; color: #999fa7">Edmonds-Karp</a> <a href="/tags/FPS/" style="font-size: 1.14em; color: #999a9c">FPS</a> <a href="/tags/Floyd-Cycle-Detection-Algorithm/" style="font-size: 1.14em; color: #999a9c">Floyd Cycle Detection Algorithm</a> <a href="/tags/Floyd-Warshall/" style="font-size: 1.21em; color: #999da3">Floyd-Warshall</a> <a href="/tags/Graham-Scan/" style="font-size: 1.17em; color: #999ca0">Graham Scan</a> <a href="/tags/Graph/" style="font-size: 1.35em; color: #99a3b1">Graph</a> <a href="/tags/Hexo/" style="font-size: 1.1em; color: #999">Hexo</a> <a href="/tags/Index-Sort/" style="font-size: 1.1em; color: #999">Index Sort</a> <a href="/tags/Kadane/" style="font-size: 1.17em; color: #999ca0">Kadane</a> <a href="/tags/Kaggle/" style="font-size: 1.1em; color: #999">Kaggle</a> <a href="/tags/Kruskcal/" style="font-size: 1.17em; color: #999ca0">Kruskcal</a> <a href="/tags/LDS/" style="font-size: 1.17em; color: #999ca0">LDS</a> <a href="/tags/LIS/" style="font-size: 1.21em; color: #999da3">LIS</a> <a href="/tags/LeetCode/" style="font-size: 1.46em; color: #99a8bc">LeetCode</a> <a href="/tags/LeetCode-Easy/" style="font-size: 1.43em; color: #99a6b8">LeetCode - Easy</a> <a href="/tags/LeetCode-Hard/" style="font-size: 1.32em; color: #99a2ae">LeetCode - Hard</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>文章</span><a class="card-more-btn" href="/archives/" title="檢視更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>網站資訊</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章數目 :</div><div class="item-count">324</div></div><div class="webinfo-item"><div class="item-name">已運行時間 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-07-01T05:51:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站總字數 :</div><div class="item-count">117.7k</div></div><div class="webinfo-item"><div class="item-name">最後更新時間 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-07-13T14:27:50.621Z"></div></div></div></div><div class="card-widget card-map">
<div class="card-content">
<div class="item-headline">
<i class="fa fa-map" aria-hidden="true"></i>
<span>User Map</span>
</div>
<script type="text/javascript" id="clustrmaps" src="//clustrmaps.com/map_v2.js?d=wrS8ghPGbwqS32IteP6XaDb-7GVEsqHugb_iN68lpxQ&cl=ffffff&w=a"></script>
</div>
</div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Larry Lai</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜尋</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[圖片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[連結]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代碼]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    let url = ''
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        if (data.user.login === 'utterances-bot') {
          url = data.body.match(/https?\:\/\/[^\" ]+/ig).slice(-1)
          return url[0]
        } else {
          url = data.body.match(/https?\:\/\/[^\" ]+/i)
          return url[0]
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/larrylai19/BlogComments/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "無法獲取評論，請確認相關配置是否正確"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          //- result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
          result += `<a href='${array[i].url}#post-comment' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        //- 直接到文章評論處
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}#post-comment'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
        
        //- result += `<div class='content'>
        //- <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        //- <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        //- </div></div>`
      }
    } else {
      result += '沒有評論'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script></div></body></html>